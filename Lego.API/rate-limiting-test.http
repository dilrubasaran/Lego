### Rate Limiting Test Endpoint'leri
### Bu dosya UserId bazlÄ± rate limiting sistemini test etmek iÃ§in kullanÄ±lÄ±r

@baseUrl = https://localhost:7087
@apiUrl = {{baseUrl}}/api

### ========================================
### 1. AUTHENTICATION - JWT Token Al
### ========================================

### Login yaparak JWT token al
POST {{apiUrl}}/Auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "123456"
}


### Response'tan token'Ä± al ve aÅŸaÄŸÄ±daki @token deÄŸiÅŸkenine yapÄ±ÅŸtÄ±r
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1laWQiOiIxIiwidW5pcXVlX25hbWUiOiJhZG1pbiIsImVtYWlsIjoiYWRtaW5AbGVnby5jb20iLCJyb2xlIjpbIkFkbWluIiwiVXNlciJdLCJqdGkiOiIwNDc5NWIwNi05MDkzLTQ5MWUtYWFiYy0xMzQ0NzZiNzI3M2QiLCJpYXQiOjE3NTc0MjA3NTUsImRlcGFydG1lbnRfaWQiOiJkZWZhdWx0IiwicGVybWlzc2lvbl9sZXZlbCI6InN0YW5kYXJkIiwibmJmIjoxNzU3NDIwNzU1LCJleHAiOjE3NTc0MjE2NTUsImlzcyI6IkxlZ29BUEkiLCJhdWQiOiJMZWdvVXNlcnMifQ.zFZ6ithkYkYQ2DGz7pTcpZ2SrXVYix9RXYfLgytwu0s

### ========================================
### 2. ğŸ”¥ USERID BAZLI RATE LIMITING TEST 
### ========================================
### TEST LÄ°MÄ°TÄ°: 1 dakikada 3 istek
### 4. istekte 429 Too Many Requests bekleniyor

### 1. Ä°stek - SUCCESS bekleniyor
GET {{apiUrl}}/RateLimiting/user-test
Authorization: Bearer {{token}}

### 2. Ä°stek - SUCCESS bekleniyor  
GET {{apiUrl}}/RateLimiting/user-test
Authorization: Bearer {{token}}

### 3. Ä°stek - SUCCESS bekleniyor
GET {{apiUrl}}/RateLimiting/user-test
Authorization: Bearer {{token}}

### 4. Ä°stek - 429 TOO MANY REQUESTS bekleniyor âŒ
GET {{apiUrl}}/RateLimiting/user-test
Authorization: Bearer {{token}}

### 5. Ä°stek - Yine 429 bekleniyor âŒ
GET {{apiUrl}}/RateLimiting/user-test
Authorization: Bearer {{token}}

### ========================================
### 3. âš¡ HIZLI ARDIÅIK TEST
### ========================================
### HÄ±zlÄ± ardÄ±ÅŸÄ±k istekler ile rate limiting testi

### HÄ±zlÄ± Test 1
GET {{apiUrl}}/RateLimiting/user-rapid
Authorization: Bearer {{token}}

### HÄ±zlÄ± Test 2
GET {{apiUrl}}/RateLimiting/user-rapid
Authorization: Bearer {{token}}

### HÄ±zlÄ± Test 3
GET {{apiUrl}}/RateLimiting/user-rapid
Authorization: Bearer {{token}}

### HÄ±zlÄ± Test 4 - Rate limit aÅŸÄ±mÄ± bekleniyor âŒ
GET {{apiUrl}}/RateLimiting/user-rapid
Authorization: Bearer {{token}}

### ========================================
### 4. ğŸ‘¤ ANONYMOUS TEST (IP Fallback)
### ========================================
### JWT token olmadan - IP bazlÄ± rate limiting

### Anonymous Test 1
GET {{apiUrl}}/RateLimiting/anonymous-test

### Anonymous Test 2
GET {{apiUrl}}/RateLimiting/anonymous-test

### Anonymous Test 3
GET {{apiUrl}}/RateLimiting/anonymous-test

### Anonymous Test 4
GET {{apiUrl}}/RateLimiting/anonymous-test

### Anonymous Test 5
GET {{apiUrl}}/RateLimiting/anonymous-test

### ========================================
### 5. ğŸ” IP SPECIFIC TEST
### ========================================
### IP bazlÄ± rate limiting testi

### IP Test 1
GET {{apiUrl}}/RateLimiting/ip-specific

### IP Test 2
GET {{apiUrl}}/RateLimiting/ip-specific

### IP Test 3
GET {{apiUrl}}/RateLimiting/ip-specific

### ========================================
### 6. ğŸ“Š DÄ°ÄER ENDPOINT'LER
### ========================================

### Public endpoint test
GET {{apiUrl}}/RateLimiting/public

### Private endpoint test
GET {{apiUrl}}/RateLimiting/private

### Submit data test
POST {{apiUrl}}/RateLimiting/submit
Content-Type: application/json

{
  "content": "Test data for rate limiting"
}

### ========================================
### 7. â° 1 DAKÄ°KA SONRA TEST (Reset testi)
### ========================================
### 1 dakika bekledikten sonra counter'larÄ±n reset olduÄŸunu test et

### Reset Test - 1 dakika sonra Ã§alÄ±ÅŸtÄ±r
GET {{apiUrl}}/RateLimiting/user-test
Authorization: Bearer {{token}}

### ========================================
### 8. ğŸš¨ HATA SENARYOLARI
### ========================================

### GeÃ§ersiz token ile test
GET {{apiUrl}}/RateLimiting/user-test
Authorization: Bearer invalid_token_here

### Token olmadan authorize endpoint'e istek
GET {{apiUrl}}/RateLimiting/user-test

### ========================================
### NOTLAR:
### ========================================
### 1. Ä°lk olarak login yapÄ±p JWT token alÄ±n
### 2. Token'Ä± @token deÄŸiÅŸkenine yapÄ±ÅŸtÄ±rÄ±n
### 3. UserId rate limiting: 1dk/3 istek (TEST)
### 4. 4. istekten itibaren 429 error bekleniyor
### 5. 1 dakika sonra counter reset olur
### 6. Anonymous istekler IP bazlÄ± limite tabi
### ========================================
